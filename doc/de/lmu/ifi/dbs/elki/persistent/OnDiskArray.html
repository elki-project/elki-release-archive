<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_66-internal) on Fri Aug 28 16:23:15 CEST 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>OnDiskArray (ELKI: Environment for DeveLoping KDD-Applications Supported by Index-Structures)</title>
<meta name="date" content="2015-08-28">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="OnDiskArray (ELKI: Environment for DeveLoping KDD-Applications Supported by Index-Structures)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":9,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OnDiskArray.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
</ul>
<div class="aboutLanguage"><img src="../../../../../../figures/elki-logo-200.png" width="200"></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/MemoryPageFileFactory.Parameterizer.html" title="class in de.lmu.ifi.dbs.elki.persistent"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArrayPageFile.html" title="class in de.lmu.ifi.dbs.elki.persistent"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html" target="_top">Frames</a></li>
<li><a href="OnDiskArray.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">de.lmu.ifi.dbs.elki.persistent</div>
<h2 title="Class OnDiskArray" class="title">Class OnDiskArray</h2>
</div>
<div class="contentContainer"><map id="APIVIZ" name="APIVIZ">
<area shape="rect" id="node1" title="RandomAccessFile (java.io)" alt="" coords="124,133,259,173"/>
<area shape="rect" id="node2" href="OnDiskUpperTriangleMatrix.html" title="OnDiskUpperTriangleMatrix" alt="" coords="5,5,185,31"/>
<area shape="rect" id="node3" href="OnDiskArrayPageFile.html" title="OnDiskArrayPageFile" alt="" coords="215,5,362,31"/>
<area shape="rect" id="node4" href="OnDiskArray.html" title="OnDiskArray" alt="" coords="143,69,239,95"/>
</map>

<CENTER><IMG SRC="OnDiskArray.png" USEMAP="#APIVIZ" BORDER="0"></CENTER>


<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>de.lmu.ifi.dbs.elki.persistent.OnDiskArray</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">OnDiskArray</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">On Disc Array storage for records of a given size.
 
 This can be used to implement various fixed size record-based data
 structures. The file format is designed to have a fixed-size header followed
 by the actual data.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Erich Schubert</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#file">file</a></span></code>
<div class="block">Random Access File object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#filename">filename</a></span></code>
<div class="block">File name.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#HEADER_POS_SIZE">HEADER_POS_SIZE</a></span></code>
<div class="block">Position of file size (in records).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#headersize">headersize</a></span></code>
<div class="block">Size of the header in the file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#INTERNAL_HEADER_SIZE">INTERNAL_HEADER_SIZE</a></span></code>
<div class="block">Size of the classes header size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html?is-external=true" title="class or interface in java.nio.channels">FileLock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#lock">lock</a></span></code>
<div class="block">Lock for the file that will be kept while writing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#magic">magic</a></span></code>
<div class="block">Magic number used to identify files.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html?is-external=true" title="class or interface in java.nio">MappedByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#map">map</a></span></code>
<div class="block">The memory mapped buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#numrecs">numrecs</a></span></code>
<div class="block">Number of records in the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#recordsize">recordsize</a></span></code>
<div class="block">Size of the records in the file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#serialVersionUID">serialVersionUID</a></span></code>
<div class="block">Serial version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#writable">writable</a></span></code>
<div class="block">Writable or read-only object.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#OnDiskArray-java.io.File-int-int-boolean-">OnDiskArray</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;filename,
           int&nbsp;magicseed,
           int&nbsp;extraheadersize,
           boolean&nbsp;writable)</code>
<div class="block">Constructor to open an existing file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#OnDiskArray-java.io.File-int-int-int-boolean-">OnDiskArray</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;filename,
           int&nbsp;magicseed,
           int&nbsp;extraheadersize,
           int&nbsp;recordsize,
           boolean&nbsp;writable)</code>
<div class="block">Constructor to open an existing file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#OnDiskArray-java.io.File-int-int-int-int-">OnDiskArray</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;filename,
           int&nbsp;magicseed,
           int&nbsp;extraheadersize,
           int&nbsp;recordsize,
           int&nbsp;initialsize)</code>
<div class="block">Constructor to write a new file.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#close--">close</a></span>()</code>
<div class="block">Explicitly close the file.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#ensureSize-int-">ensureSize</a></span>(int&nbsp;size)</code>
<div class="block">Ensure that the file can fit the given number of records.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#getExtraHeader--">getExtraHeader</a></span>()</code>
<div class="block">Read the extra header data.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#getExtraHeaderSize--">getExtraHeaderSize</a></span>()</code>
<div class="block">Return the size of the extra header.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#getFilename--">getFilename</a></span>()</code>
<div class="block">Get the file name.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#getNumRecords--">getNumRecords</a></span>()</code>
<div class="block">Get number of records in file.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#getRecordBuffer-int-">getRecordBuffer</a></span>(int&nbsp;index)</code>
<div class="block">Get a record buffer</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#getRecordsize--">getRecordsize</a></span>()</code>
<div class="block">Get the size of a single record.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#indexToFileposition-long-">indexToFileposition</a></span>(long&nbsp;index)</code>
<div class="block">Compute file position from index number</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#isWritable--">isWritable</a></span>()</code>
<div class="block">Check if the file is writable.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#mapArray--">mapArray</a></span>()</code>
<div class="block">(Re-) map the data array.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#mixMagic-int-int-">mixMagic</a></span>(int&nbsp;magic1,
        int&nbsp;magic2)</code>
<div class="block">Mix two magic numbers into one, to obtain a combined magic.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#resizeFile-int-">resizeFile</a></span>(int&nbsp;newsize)</code>
<div class="block">Resize file to the intended size</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html#validateHeader-boolean-">validateHeader</a></span>(boolean&nbsp;validateRecordSize)</code>
<div class="block">Validates the header and throws an IOException if the header is invalid.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="serialVersionUID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serialVersionUID</h4>
<pre>private static final&nbsp;long serialVersionUID</pre>
<div class="block">Serial version.
 
 NOTE: Change this version whenever the file structure is changed in an
 incompatible way: This will modify the file magic, and thus prevent
 applications from reading incompatible files.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#de.lmu.ifi.dbs.elki.persistent.OnDiskArray.serialVersionUID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="magic">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>magic</h4>
<pre>protected&nbsp;int magic</pre>
<div class="block">Magic number used to identify files.</div>
</li>
</ul>
<a name="headersize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>headersize</h4>
<pre>private&nbsp;int headersize</pre>
<div class="block">Size of the header in the file. Note that the internal header is four
 integers already.</div>
</li>
</ul>
<a name="recordsize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordsize</h4>
<pre>private&nbsp;int recordsize</pre>
<div class="block">Size of the records in the file.</div>
</li>
</ul>
<a name="numrecs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numrecs</h4>
<pre>private&nbsp;int numrecs</pre>
<div class="block">Number of records in the file.</div>
</li>
</ul>
<a name="filename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filename</h4>
<pre>private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a> filename</pre>
<div class="block">File name.</div>
</li>
</ul>
<a name="file">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>file</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a> file</pre>
<div class="block">Random Access File object.</div>
</li>
</ul>
<a name="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html?is-external=true" title="class or interface in java.nio.channels">FileLock</a> lock</pre>
<div class="block">Lock for the file that will be kept while writing.</div>
</li>
</ul>
<a name="writable">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writable</h4>
<pre>private&nbsp;boolean writable</pre>
<div class="block">Writable or read-only object.</div>
</li>
</ul>
<a name="map">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>map</h4>
<pre>private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html?is-external=true" title="class or interface in java.nio">MappedByteBuffer</a> map</pre>
<div class="block">The memory mapped buffer.</div>
</li>
</ul>
<a name="INTERNAL_HEADER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INTERNAL_HEADER_SIZE</h4>
<pre>private static final&nbsp;int INTERNAL_HEADER_SIZE</pre>
<div class="block">Size of the classes header size.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#de.lmu.ifi.dbs.elki.persistent.OnDiskArray.INTERNAL_HEADER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="HEADER_POS_SIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HEADER_POS_SIZE</h4>
<pre>private static final&nbsp;int HEADER_POS_SIZE</pre>
<div class="block">Position of file size (in records).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#de.lmu.ifi.dbs.elki.persistent.OnDiskArray.HEADER_POS_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="OnDiskArray-java.io.File-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OnDiskArray</h4>
<pre>public&nbsp;OnDiskArray(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;filename,
                   int&nbsp;magicseed,
                   int&nbsp;extraheadersize,
                   int&nbsp;recordsize,
                   int&nbsp;initialsize)
            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Constructor to write a new file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - File name to be opened.</dd>
<dd><code>magicseed</code> - Magic number to derive real magic from.</dd>
<dd><code>extraheadersize</code> - header size NOT including the internal header</dd>
<dd><code>recordsize</code> - Record size</dd>
<dd><code>initialsize</code> - Initial file size (in records)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
<a name="OnDiskArray-java.io.File-int-int-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OnDiskArray</h4>
<pre>public&nbsp;OnDiskArray(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;filename,
                   int&nbsp;magicseed,
                   int&nbsp;extraheadersize,
                   int&nbsp;recordsize,
                   boolean&nbsp;writable)
            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Constructor to open an existing file. The provided record size must match
 the record size stored within the files header. If you don't know this size
 yet and/or need to access the extra header you should use the other
 constructor below</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - File name to be opened.</dd>
<dd><code>magicseed</code> - Magic number to derive real magic from.</dd>
<dd><code>extraheadersize</code> - header size NOT including the internal header</dd>
<dd><code>recordsize</code> - Record size</dd>
<dd><code>writable</code> - flag to open the file writable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
<a name="OnDiskArray-java.io.File-int-int-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OnDiskArray</h4>
<pre>public&nbsp;OnDiskArray(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;filename,
                   int&nbsp;magicseed,
                   int&nbsp;extraheadersize,
                   boolean&nbsp;writable)
            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Constructor to open an existing file. The record size is read from the
 file's header and can be obtained by <code>getRecordsize()</code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - File name to be opened.</dd>
<dd><code>magicseed</code> - Magic number to derive real magic from.</dd>
<dd><code>extraheadersize</code> - header size NOT including the internal header</dd>
<dd><code>writable</code> - flag to open the file writable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="mapArray--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapArray</h4>
<pre>private&nbsp;void&nbsp;mapArray()
               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">(Re-) map the data array.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on mapping error.</dd>
</dl>
</li>
</ul>
<a name="validateHeader-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateHeader</h4>
<pre>private&nbsp;void&nbsp;validateHeader(boolean&nbsp;validateRecordSize)
                     throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Validates the header and throws an IOException if the header is invalid. If
 validateRecordSize is set to true the record size must match exactly the
 stored record size within the files header, else the record size is read
 from the header and used.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>validateRecordSize</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="mixMagic-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mixMagic</h4>
<pre>public static final&nbsp;int&nbsp;mixMagic(int&nbsp;magic1,
                                 int&nbsp;magic2)</pre>
<div class="block">Mix two magic numbers into one, to obtain a combined magic. Note:
 mixMagic(a,b) != mixMagic(b,a) usually.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>magic1</code> - Magic number to mix.</dd>
<dd><code>magic2</code> - Magic number to mix.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Mixed magic number.</dd>
</dl>
</li>
</ul>
<a name="indexToFileposition-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexToFileposition</h4>
<pre>private&nbsp;long&nbsp;indexToFileposition(long&nbsp;index)</pre>
<div class="block">Compute file position from index number</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - Index offset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>file position</dd>
</dl>
</li>
</ul>
<a name="resizeFile-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resizeFile</h4>
<pre>public&nbsp;void&nbsp;resizeFile(int&nbsp;newsize)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Resize file to the intended size</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newsize</code> - New file size.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
<a name="getRecordBuffer-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordBuffer</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;getRecordBuffer(int&nbsp;index)
                           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Get a record buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - Record index</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Byte buffer for the record</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
<a name="getExtraHeaderSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtraHeaderSize</h4>
<pre>protected&nbsp;int&nbsp;getExtraHeaderSize()</pre>
<div class="block">Return the size of the extra header. Accessor.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Extra header size</dd>
</dl>
</li>
</ul>
<a name="getExtraHeader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtraHeader</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;getExtraHeader()
                          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Read the extra header data.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>additional header data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
<a name="getRecordsize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordsize</h4>
<pre>protected&nbsp;int&nbsp;getRecordsize()</pre>
<div class="block">Get the size of a single record.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Record size.</dd>
</dl>
</li>
</ul>
<a name="getFilename--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilename</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFilename()</pre>
<div class="block">Get the file name.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>File name</dd>
</dl>
</li>
</ul>
<a name="isWritable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWritable</h4>
<pre>public&nbsp;boolean&nbsp;isWritable()</pre>
<div class="block">Check if the file is writable.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the file is writable.</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Explicitly close the file. Note: following operations will likely cause
 IOExceptions.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on IO errors</dd>
</dl>
</li>
</ul>
<a name="getNumRecords--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumRecords</h4>
<pre>public&nbsp;int&nbsp;getNumRecords()</pre>
<div class="block">Get number of records in file.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Number of records in the file.</dd>
</dl>
</li>
</ul>
<a name="ensureSize-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ensureSize</h4>
<pre>public&nbsp;void&nbsp;ensureSize(int&nbsp;size)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Ensure that the file can fit the given number of records.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - Size</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OnDiskArray.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
</ul>
<div class="aboutLanguage">ELKI Version 0.7.0~20150828</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/MemoryPageFileFactory.Parameterizer.html" title="class in de.lmu.ifi.dbs.elki.persistent"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../de/lmu/ifi/dbs/elki/persistent/OnDiskArrayPageFile.html" title="class in de.lmu.ifi.dbs.elki.persistent"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?de/lmu/ifi/dbs/elki/persistent/OnDiskArray.html" target="_top">Frames</a></li>
<li><a href="OnDiskArray.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright © 2015 <a href="http://elki.dbs.ifi.lmu.de/">ELKI Development Team</a>, <a href="http://www.dbs.ifi.lmu.de/">Lehr- und Forschungseinheit für Datenbanksysteme</a>, <a href="http://www.lmu.de/">Ludwig-Maximilians-Universität München</a>. <a href="http://elki.dbs.ifi.lmu.de/wiki/License">License information.</a></small></p>
</body>
</html>
