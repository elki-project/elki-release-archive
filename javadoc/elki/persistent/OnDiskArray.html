<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc -->
<title>OnDiskArray (ELKI: Environment for DeveLoping KDD-Applications Supported by Index-Structures)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="OnDiskArray (ELKI: Environment for DeveLoping KDD-Applications Supported by Index-Structures)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":9,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OnDiskArray.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
</ul>
<div class="aboutLanguage"><img src="../../figures/elki-logo-200.png" width="200"><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">elki.persistent</a></div>
<h2 title="Class OnDiskArray" class="title">Class OnDiskArray</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>elki.persistent.OnDiskArray</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.AutoCloseable</code></dd>
</dl>
<hr>
<object type="image/svg+xml" data="OnDiskArray.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public class <span class="typeNameLabel">OnDiskArray</span>
extends java.lang.Object
implements java.lang.AutoCloseable</pre>
<div class="block">On Disc Array storage for records of a given size.
 <p>
 This can be used to implement various fixed size record-based data
 structures. The file format is designed to have a fixed-size header followed
 by the actual data.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.2</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Erich Schubert</dd>
</dl>
</li>
</ul>
</div>
<div class="summary" style="clear:right;">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.nio.channels.FileChannel</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#file">file</a></span></code></th>
<td class="colLast">
<div class="block">Random Access File object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#filename">filename</a></span></code></th>
<td class="colLast">
<div class="block">File name.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#HEADER_POS_SIZE">HEADER_POS_SIZE</a></span></code></th>
<td class="colLast">
<div class="block">Position of file size (in records).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#headersize">headersize</a></span></code></th>
<td class="colLast">
<div class="block">Size of the header in the file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INTERNAL_HEADER_SIZE">INTERNAL_HEADER_SIZE</a></span></code></th>
<td class="colLast">
<div class="block">Size of the classes header size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.nio.channels.FileLock</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lock">lock</a></span></code></th>
<td class="colLast">
<div class="block">Lock for the file that will be kept while writing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#magic">magic</a></span></code></th>
<td class="colLast">
<div class="block">Magic number used to identify files.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.nio.MappedByteBuffer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#map">map</a></span></code></th>
<td class="colLast">
<div class="block">The memory mapped buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#numrecs">numrecs</a></span></code></th>
<td class="colLast">
<div class="block">Number of records in the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recordsize">recordsize</a></span></code></th>
<td class="colLast">
<div class="block">Size of the records in the file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#serialVersionUID">serialVersionUID</a></span></code></th>
<td class="colLast">
<div class="block">Serial version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writable">writable</a></span></code></th>
<td class="colLast">
<div class="block">Writable or read-only object.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,int,int,boolean)">OnDiskArray</a></span>&#8203;(java.nio.file.Path&nbsp;filename,
           int&nbsp;magicseed,
           int&nbsp;extraheadersize,
           boolean&nbsp;writable)</code></th>
<td class="colLast">
<div class="block">Constructor to open an existing file.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,int,int,int,boolean)">OnDiskArray</a></span>&#8203;(java.nio.file.Path&nbsp;filename,
           int&nbsp;magicseed,
           int&nbsp;extraheadersize,
           int&nbsp;recordsize,
           boolean&nbsp;writable)</code></th>
<td class="colLast">
<div class="block">Constructor to open an existing file.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,int,int,int,int)">OnDiskArray</a></span>&#8203;(java.nio.file.Path&nbsp;filename,
           int&nbsp;magicseed,
           int&nbsp;extraheadersize,
           int&nbsp;recordsize,
           int&nbsp;initialsize)</code></th>
<td class="colLast">
<div class="block">Constructor to write a new file.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Explicitly close the file.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ensureSize(int)">ensureSize</a></span>&#8203;(int&nbsp;size)</code></th>
<td class="colLast">
<div class="block">Ensure that the file can fit the given number of records.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.nio.ByteBuffer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getExtraHeader()">getExtraHeader</a></span>()</code></th>
<td class="colLast">
<div class="block">Read the extra header data.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getExtraHeaderSize()">getExtraHeaderSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the size of the extra header.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFilename()">getFilename</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the file name.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNumRecords()">getNumRecords</a></span>()</code></th>
<td class="colLast">
<div class="block">Get number of records in file.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.nio.ByteBuffer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRecordBuffer(int)">getRecordBuffer</a></span>&#8203;(int&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Get a record buffer</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRecordsize()">getRecordsize</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the size of a single record.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#indexToFileposition(long)">indexToFileposition</a></span>&#8203;(long&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Compute file position from index number</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isWritable()">isWritable</a></span>()</code></th>
<td class="colLast">
<div class="block">Check if the file is writable.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mapArray()">mapArray</a></span>()</code></th>
<td class="colLast">
<div class="block">(Re-) map the data array.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mixMagic(int,int)">mixMagic</a></span>&#8203;(int&nbsp;magic1,
        int&nbsp;magic2)</code></th>
<td class="colLast">
<div class="block">Mix two magic numbers into one, to obtain a combined magic.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resizeFile(int)">resizeFile</a></span>&#8203;(int&nbsp;newsize)</code></th>
<td class="colLast">
<div class="block">Resize file to the intended size</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#validateHeader(boolean)">validateHeader</a></span>&#8203;(boolean&nbsp;validateRecordSize)</code></th>
<td class="colLast">
<div class="block">Validates the header and throws an IOException if the header is invalid.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="serialVersionUID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serialVersionUID</h4>
<pre>private static final&nbsp;long serialVersionUID</pre>
<div class="block">Serial version.
 <p>
 NOTE: Change this version whenever the file structure is changed in an
 incompatible way: This will modify the file magic, and thus prevent
 applications from reading incompatible files.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#elki.persistent.OnDiskArray.serialVersionUID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="magic">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>magic</h4>
<pre>protected&nbsp;int magic</pre>
<div class="block">Magic number used to identify files.</div>
</li>
</ul>
<a id="headersize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>headersize</h4>
<pre>private&nbsp;int headersize</pre>
<div class="block">Size of the header in the file. Note that the internal header is four
 integers already.</div>
</li>
</ul>
<a id="recordsize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordsize</h4>
<pre>private&nbsp;int recordsize</pre>
<div class="block">Size of the records in the file.</div>
</li>
</ul>
<a id="numrecs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numrecs</h4>
<pre>private&nbsp;int numrecs</pre>
<div class="block">Number of records in the file.</div>
</li>
</ul>
<a id="filename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filename</h4>
<pre>private&nbsp;java.nio.file.Path filename</pre>
<div class="block">File name.</div>
</li>
</ul>
<a id="file">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>file</h4>
<pre>private final&nbsp;java.nio.channels.FileChannel file</pre>
<div class="block">Random Access File object.</div>
</li>
</ul>
<a id="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>private&nbsp;java.nio.channels.FileLock lock</pre>
<div class="block">Lock for the file that will be kept while writing.</div>
</li>
</ul>
<a id="writable">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writable</h4>
<pre>private&nbsp;boolean writable</pre>
<div class="block">Writable or read-only object.</div>
</li>
</ul>
<a id="map">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>map</h4>
<pre>private&nbsp;java.nio.MappedByteBuffer map</pre>
<div class="block">The memory mapped buffer.</div>
</li>
</ul>
<a id="INTERNAL_HEADER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INTERNAL_HEADER_SIZE</h4>
<pre>private static final&nbsp;int INTERNAL_HEADER_SIZE</pre>
<div class="block">Size of the classes header size.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#elki.persistent.OnDiskArray.INTERNAL_HEADER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="HEADER_POS_SIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HEADER_POS_SIZE</h4>
<pre>private static final&nbsp;int HEADER_POS_SIZE</pre>
<div class="block">Position of file size (in records).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#elki.persistent.OnDiskArray.HEADER_POS_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.nio.file.Path,int,int,int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OnDiskArray</h4>
<pre>public&nbsp;OnDiskArray&#8203;(java.nio.file.Path&nbsp;filename,
                   int&nbsp;magicseed,
                   int&nbsp;extraheadersize,
                   int&nbsp;recordsize,
                   int&nbsp;initialsize)
            throws java.io.IOException</pre>
<div class="block">Constructor to write a new file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - File name to be opened.</dd>
<dd><code>magicseed</code> - Magic number to derive real magic from.</dd>
<dd><code>extraheadersize</code> - header size NOT including the internal header</dd>
<dd><code>recordsize</code> - Record size</dd>
<dd><code>initialsize</code> - Initial file size (in records)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path,int,int,int,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OnDiskArray</h4>
<pre>public&nbsp;OnDiskArray&#8203;(java.nio.file.Path&nbsp;filename,
                   int&nbsp;magicseed,
                   int&nbsp;extraheadersize,
                   int&nbsp;recordsize,
                   boolean&nbsp;writable)
            throws java.io.IOException</pre>
<div class="block">Constructor to open an existing file. The provided record size must match
 the record size stored within the files header. If you don't know this size
 yet and/or need to access the extra header you should use the other
 constructor below</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - File name to be opened.</dd>
<dd><code>magicseed</code> - Magic number to derive real magic from.</dd>
<dd><code>extraheadersize</code> - header size NOT including the internal header</dd>
<dd><code>recordsize</code> - Record size</dd>
<dd><code>writable</code> - flag to open the file writable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path,int,int,boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OnDiskArray</h4>
<pre>public&nbsp;OnDiskArray&#8203;(java.nio.file.Path&nbsp;filename,
                   int&nbsp;magicseed,
                   int&nbsp;extraheadersize,
                   boolean&nbsp;writable)
            throws java.io.IOException</pre>
<div class="block">Constructor to open an existing file. The record size is read from the
 file's header and can be obtained by <code>getRecordsize()</code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - File name to be opened.</dd>
<dd><code>magicseed</code> - Magic number to derive real magic from.</dd>
<dd><code>extraheadersize</code> - header size NOT including the internal header</dd>
<dd><code>writable</code> - flag to open the file writable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="mapArray()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapArray</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;mapArray()
               throws java.io.IOException</pre>
<div class="block">(Re-) map the data array.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on mapping error.</dd>
</dl>
</li>
</ul>
<a id="validateHeader(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateHeader</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;validateHeader&#8203;(boolean&nbsp;validateRecordSize)
                     throws java.io.IOException</pre>
<div class="block">Validates the header and throws an IOException if the header is invalid. If
 validateRecordSize is set to true the record size must match exactly the
 stored record size within the files header, else the record size is read
 from the header and used.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>validateRecordSize</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="mixMagic(int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mixMagic</h4>
<pre class="methodSignature">public static final&nbsp;int&nbsp;mixMagic&#8203;(int&nbsp;magic1,
                                 int&nbsp;magic2)</pre>
<div class="block">Mix two magic numbers into one, to obtain a combined magic. Note:
 mixMagic(a,b) != mixMagic(b,a) usually.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>magic1</code> - Magic number to mix.</dd>
<dd><code>magic2</code> - Magic number to mix.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Mixed magic number.</dd>
</dl>
</li>
</ul>
<a id="indexToFileposition(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexToFileposition</h4>
<pre class="methodSignature">private&nbsp;long&nbsp;indexToFileposition&#8203;(long&nbsp;index)</pre>
<div class="block">Compute file position from index number</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - Index offset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>file position</dd>
</dl>
</li>
</ul>
<a id="resizeFile(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resizeFile</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;resizeFile&#8203;(int&nbsp;newsize)
                throws java.io.IOException</pre>
<div class="block">Resize file to the intended size</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newsize</code> - New file size.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
<a id="getRecordBuffer(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordBuffer</h4>
<pre class="methodSignature">public&nbsp;java.nio.ByteBuffer&nbsp;getRecordBuffer&#8203;(int&nbsp;index)
                                    throws java.io.IOException</pre>
<div class="block">Get a record buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - Record index</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Byte buffer for the record</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
<a id="getExtraHeaderSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtraHeaderSize</h4>
<pre class="methodSignature">protected&nbsp;int&nbsp;getExtraHeaderSize()</pre>
<div class="block">Return the size of the extra header. Accessor.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Extra header size</dd>
</dl>
</li>
</ul>
<a id="getExtraHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtraHeader</h4>
<pre class="methodSignature">public&nbsp;java.nio.ByteBuffer&nbsp;getExtraHeader()
                                   throws java.io.IOException</pre>
<div class="block">Read the extra header data.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>additional header data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
<a id="getRecordsize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordsize</h4>
<pre class="methodSignature">protected&nbsp;int&nbsp;getRecordsize()</pre>
<div class="block">Get the size of a single record.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Record size.</dd>
</dl>
</li>
</ul>
<a id="getFilename()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilename</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path&nbsp;getFilename()</pre>
<div class="block">Get the file name.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>File name</dd>
</dl>
</li>
</ul>
<a id="isWritable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWritable</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isWritable()</pre>
<div class="block">Check if the file is writable.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the file is writable.</dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()
           throws java.io.IOException</pre>
<div class="block">Explicitly close the file. Note: following operations will likely cause
 IOExceptions.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - on IO errors</dd>
</dl>
</li>
</ul>
<a id="getNumRecords()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumRecords</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getNumRecords()</pre>
<div class="block">Get number of records in file.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Number of records in the file.</dd>
</dl>
</li>
</ul>
<a id="ensureSize(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ensureSize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;ensureSize&#8203;(int&nbsp;size)
                throws java.io.IOException</pre>
<div class="block">Ensure that the file can fit the given number of records.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - Size</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OnDiskArray.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
</ul>
<div class="aboutLanguage">ELKI version 0.8.0</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2022 <a href="https://elki-project.github.io/">ELKI Development Team</a>. <a href="https://elki-project.github.io/license">License information.</a><!-- so we get to know what people search for: --><script>if(window.location.hostname=="elki-project.github.io"||window.location.hostname=="jitpack.io"||window.location.hostname=="javadoc.io"){(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-87792924-1","auto");ga("send","pageview");}</script></small></p>
</footer>
</body>
</html>